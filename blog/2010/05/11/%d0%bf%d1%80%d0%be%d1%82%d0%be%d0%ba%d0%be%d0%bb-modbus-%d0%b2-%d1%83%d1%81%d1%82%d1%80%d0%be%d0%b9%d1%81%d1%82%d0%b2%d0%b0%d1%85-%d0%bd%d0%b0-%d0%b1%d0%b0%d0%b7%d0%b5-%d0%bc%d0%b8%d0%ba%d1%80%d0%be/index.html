
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Протокол Modbus в устройствах на базе микроконтроллеров. Введение. - Записная книжка разработчика</title>
  <meta name="author" content="Your Name">

  
  <meta name="description" content="Протокол Modbus находит широкое применение в устройствах промышленной автоматики, давая возможность организовывать удалённый сбор данных и управление &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://arktur04.github.io/blog/2010/05/11/%25d0%25bf%25d1%2580%25d0%25be%25d1%2582%25d0%25be%25d0%25ba%25d0%25be%25d0%25bb-modbus-%25d0%25b2-%25d1%2583%25d1%2581%25d1%2582%25d1%2580%25d0%25be%25d0%25b9%25d1%2581%25d1%2582%25d0%25b2%25d0%25b0%25d1%2585-%25d0%25bd%25d0%25b0-%25d0%25b1%25d0%25b0%25d0%25b7%25d0%25b5-%25d0%25bc%25d0%25b8%25d0%25ba%25d1%2580%25d0%25be/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Записная книжка разработчика" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="/javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  

</head>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [ ['$', '$'], ["\(", "\)"] ],
        displayMath: [ ['$$', '$$'], ["\[", "\]"] ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
      //,
      //displayAlign: "left",
      //displayIndent: "2em"
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Записная книжка разработчика</a></h1>
  
    <h2>Мои проекты</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="sitesearch" value="arktur04.github.io">
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Блог</a></li>
  <li><a href="/blog/archives">Архивы</a></li>
  <li><a href="/books">Книги</a></li>
  <li><a href="/projects">Мои проекты</a></li>
  <li><a href="/about-page">О блоге и обо мне</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Протокол Modbus в устройствах на базе микроконтроллеров. Введение.</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2010-05-11T18:04:15+06:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>6:04 pm</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://arktur04.github.io">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><em>Протокол Modbus находит широкое применение в устройствах промышленной автоматики, давая возможность организовывать удалённый сбор данных и управление с помощью операторских панелей и SCADA-систем, а также подключать к вашему устройству различные модули расширения. В статье рассматривается применение устройств с протоколом Modbus, а также простейшая реализация протокола в микроконтроллерном устройстве.</em></p>
<p><a href="/images/2010/05/panel1.jpg"><img class="alignnone size-medium wp-image-358" title="panel" src="/assets/panel1-300x267.jpg" alt="" width="300" height="267" /></a></p>
<p>Рис. 1. Операторская панель Weintek MT6070TV и промышленный контроллер ICP-DAS i-7188EGD. Передача данных происходит по протоколу Modbus.</p>
<p>Статья не является переводом официального стандарта Modbus, в ней рассматриваются практические вопросы применения протокола.</p>
<p><!--more--></p>
<p><strong>Введение</strong></p>
<p>Можно выделить следующие разновидности протокола: Modbus RTU, Modbus ASCII и Modbus TCP. Первые две разновидности протокола как правило имеют в качестве  физической основы линию RS-485, а Modbus TCP работает в сети Ethernet.</p>
<p>Не рассматривая пока устройство протокола подробно, остановимся на его некоторых важнейших особенностях. В сети на протоколах RTU и ASCII (здесь и далее будем называть так Modbus RTU и Modbus ASCIIсоответственно) есть одно ведущее устройство (master), остальные устройства являются ведомыми (slave). Каждый ведомый имеет адрес. Адрес может находится в диапазоне 1-255, нулевого адреса быть не может. Обмен данными всегда инициирует ведущий, запрашивая данные от ведомых либо отдавая им команды. Посылка ведущего называется запросом (query). Приняв запрос, ведомое устройство посылает ответ (response). Адрес ведомого содержится в запросе, ответ на запрос обязателен для ведомого. Таким образом, транзакция протокола состоит из запроса и ответа.</p>
<p>В сети не могут быть два ведущих устройства. Линии RS-485 не имеют защиты от коллизий сети, то есть два устройства не должны начинать передачу одновременно, это приведёт к перегрузке выходов драйверов RS-485. Именно поэтому так важно соблюдать порядок передачи данных (запрос ведущего-ответ ведомого). Ведомых устройств теоретически может быть до 255, однако практически это количество ограничено нагрузочной способностью драйверов линии RS-485. В наихудшем случае эта нагрузочная способность не ниже 32 устройств на одной линии.</p>
<p>Если требуется организовать передачу данных только между двумя устройствами, одно из которых является ведущим, а другое - ведомым, возможно применение в качестве физической среды протокола RS-232.</p>
<p>Протоколом предусматриваются широковещательнве (broadcast) посылки, адресованные сразу всем устройствам сети. Именно для таких посылок зарезервирован нулевой адрес, но они применяются редко и в данной статье не рассматриваются.</p>
<p>Отличие протоколаModbus  TCP состоит в том, что ведущих устройств в сети может быть несколько, так как  в сетях Ethernet допустимы коллизии. В ряде случаев это может быть очень удобно, и ниже будут рассмотрены такие случаи.</p>
<p>Разновидности протокола Modbus не ограничиваются вышеперечисленными, существует, например, разновидность Modbus UDP, однако они не будут рассматриваться в данной статье в силу их малой распространённости.</p>
<p><strong>Ссылки</strong></p>
<p><em>English</em></p>
<p>Главный сайт - <a href="http://www.modbus.org/tech.php">http://www.modbus.org/tech.php</a></p>
<p>Описание протоколов RTU и ASCII приведены в документе Modicon Modbus Protocol Reference Guide, который можно найти, например, здесь: <a href="http://www.modbustools.com/PI_MBUS_300.pdf">http://www.modbustools.com/PI_MBUS_300.pdf</a>.</p>
<p><em>На русском языке</em></p>
<p>Статья в Википедии <a href="http://ru.wikipedia.org/wiki/Modbus">http://ru.wikipedia.org/wiki/Modbus</a>. Там же можно найти другие ссылки по протоколу Modbus, как на русском, так и на английском языке.</p>
<p><strong>Заключение</strong></p>
<p>После ознакомления с документацией на протокол создаётся впечатление, что он чрезвычайно сложен и его реализация в разрабатываемом устройстве является очень трудоёмкой задачей. Однако в дальнейшем станет ясно, что эта задача не так уж сложна.</p>
<p><em>Продолжение следует.</em></p>
<p><strong>Владимир Татарчевский</strong></p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">{"login"=>"arktur04", "email"=>"arktur04@mail.ru", "display_name"=>"arktur04", "first_name"=>"", "last_name"=>""}</span></span>

      




<time class='entry-date' datetime='2010-05-11T18:04:15+06:00'><span class='date'><span class='date-month'>May</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2010</span></span> <span class='time'>6:04 pm</span></time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/modbus/'>modbus</a>, <a class='category' href='/blog/categories/scada/'>scada</a>, <a class='category' href='/blog/categories/plk/'>ПЛК</a>, <a class='category' href='/blog/categories/intieriesnyie-ssylki/'>интересные ссылки</a>, <a class='category' href='/blog/categories/mikrokontrolliery/'>микроконтроллеры</a>, <a class='category' href='/blog/categories/proghrammirovaniie/'>программирование</a>, <a class='category' href='/blog/categories/stat'i/'>статьи</a>, <a class='category' href='/blog/categories/foto/'>фото</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://arktur04.github.io/blog/2010/05/11/%25d0%25bf%25d1%2580%25d0%25be%25d1%2582%25d0%25be%25d0%25ba%25d0%25be%25d0%25bb-modbus-%25d0%25b2-%25d1%2583%25d1%2581%25d1%2582%25d1%2580%25d0%25be%25d0%25b9%25d1%2581%25d1%2582%25d0%25b2%25d0%25b0%25d1%2585-%25d0%25bd%25d0%25b0-%25d0%25b1%25d0%25b0%25d0%25b7%25d0%25b5-%25d0%25bc%25d0%25b8%25d0%25ba%25d1%2580%25d0%25be/" data-via="" data-counturl="http://arktur04.github.io/blog/2010/05/11/%25d0%25bf%25d1%2580%25d0%25be%25d1%2582%25d0%25be%25d0%25ba%25d0%25be%25d0%25bb-modbus-%25d0%25b2-%25d1%2583%25d1%2581%25d1%2582%25d1%2580%25d0%25be%25d0%25b9%25d1%2581%25d1%2582%25d0%25b2%25d0%25b0%25d1%2585-%25d0%25bd%25d0%25b0-%25d0%25b1%25d0%25b0%25d0%25b7%25d0%25b5-%25d0%25bc%25d0%25b8%25d0%25ba%25d1%2580%25d0%25be/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2010/05/08/iar-%25d0%25b8-c/" title="Previous Post: IAR и C++">&laquo; IAR и C++</a>
      
      
        <a class="basic-alignment right" href="/blog/2010/05/11/%25d0%25ba%25d0%25bd%25d0%25b8%25d0%25b3%25d0%25b0-codevision-avr-%25d0%25bf%25d0%25be%25d1%2581%25d0%25be%25d0%25b1%25d0%25b8%25d0%25b5-%25d0%25b4%25d0%25bb%25d1%258f-%25d0%25bd%25d0%25b0%25d1%2587%25d0%25b8%25d0%25bd%25d0%25b0%25d1%258e%25d1%2589%25d0%25b8%25d1%2585/" title="Next Post: Книга CodeVision AVR. Пособие для начинающих">Книга CodeVision AVR. Пособие для начинающих &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2016/02/28/knigha-a-akho/">Книга А. Ахо, М. С. Лам, Р. Сети, Д. Ульман "Компиляторы: принципы, технологии и инструментарий"</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/02/14/knigha-gabriel-s-hjort-blindell-survey-on-instruction-selection/">Книга Gabriel S. Hjort Blindell "Survey on Instruction Selection"</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/10/knigha-steven-w-smith-the-scientist-and-engineers-guide-to-digital-signal-processing/">Книга Steven W. Smith "the Scientist and Engineer’s Guide to Digital Signal Processing"</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/04/knigha-chen-chung-shu-creating-an-llvm-backend-for-the-cpu0-architecture/">Книга Chen Chung-Shu "Creating an LLVM Backend for the Cpu0 Architecture"</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/12/16/knigha-fpga-for-dummies/">Книга Andrew Moore "FPGA for Dummies"</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/arktur04">@arktur04</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'arktur04',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2016 - Your Name -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = '32bit_me';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>

<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
